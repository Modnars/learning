# 第 6 章 存储器层次结构

计算机程序拥有名为**局部性**（locality）的基本属性。具有良好局部性的程序倾向于一次又一次地访问相同的数据项集合，或是倾向于访问邻近的数据项集合。具有良好局部性的程序比局部性差的程序更多地倾向于从存储器层次结构中较高层次处访问数据项，因此运行得更快。

**存储器山**（memory mountain）是一种描绘某台机器上存储器层次结构的性能的有趣方法，它展示出读访问时间是局部性的一个函数。

## 6.1 存储技术

计算机技术的成功很大程度上源自于存储技术的巨大进步。

### 6.1.1 随机访问存储器

**随机访问存储器**（Random-Access Memory，RAM）分为两类：静态的和动态的。静态 RAM（SRAM）比动态 RAM（DRAM）更快，但也贵得多。SRAM 用来作为高速缓存存储器，既可以在 CPU 芯片上，也可以在片下。DRAM 用来作为主存以及图形系统的帧缓冲区。典型地，一个桌面系统的 SRAM 不会超过几兆字节，但是 DRAM 却有几百或几千兆字节。

### 6.1.2 磁盘存储

### 6.1.3 固态硬盘

### 6.1.4 存储技术趋势

## 6.2 局部性

### 6.2.1 对程序数据引用的局部性

### 6.2.2 取指令的局部性

### 6.2.3 局部性小结

## 6.3 存储器层次结构

### 6.3.1 存储器层次结构中的缓存

### 6.3.2 存储器层次结构概念小结

## 6.4 高速缓存存储器

### 6.4.1 通用的高速缓存存储器组织结构

### 6.4.2 直接映射高速缓存

### 6.4.3 组相联高速缓存

### 6.4.4 全相联高速缓存

### 6.4.5 有关写的问题

### 6.4.6 一个真实的高速缓存层次结构的解剖

### 6.4.7 高速缓存参数的性能影响

## 6.5 编写高速缓存友好的代码

## 6.6 综合：高速缓存对程序性能的影响

### 6.6.1 存储器山

### 6.6.2 重新排列循环以提高空间局部性

### 6.6.3 在程序中利用局部性

## 6.7 小结
